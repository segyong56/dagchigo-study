작성자: 이숙영

# 💎 REACT 

## CONTEXT

- [리액트 개념](#react)
- [리액트 특징](#react-features)
- [리액트 장/단점](#react-pros-and-cons)
- [리액트 동작원리](#how-react-works)

## 💎 리액트 개념?_react 
프론트엔드 개발을 위해 페이스북에서 개발한 자바스크립트 기반의 오픈소스 라이브러리.<br/>
대표적인 SPA(Single Page Application)으로, 단일페이지로 사용자의 인터페이스 구현.<br/>


## 💎 리액트 특징_react-features

### 선언형
HTML / CSS / JS 를 나눠서 보여주는 것이 아닌, *한 파일에 명시적으로 작성할 수 있도록 JSX 를 활용한* 선언형 프로그래밍

* JSX 란?
외관상 HTML 처럼 보이기는 하나 React Element 를 만들 수 있는 자바스크립트를 확장한 문법.<br/>
즉, Babel에 의해 변환된 자바스크립트 안에서 HTML 문법을 이용해 React UI를 구성할 수 있게 도와주는 역할을 한다.
* WebPack 이란?
JSX 형식 안에 들어갈 모든 컴포넌트를  import(혹은 require) 하여 하나로 결합하는데 사용
* Babel 이란 ?
리액트에서 ECMA Scripts 라는 표준화 된 자바스크립트 문법을 사용하기 위해 사용되는 것

### 컴포넌트 기반
하나의 기능 구현을 위해 여러종류의 코드를 묶어둔 특징이 있다.(항상 대문자로 시작)

### 범용성
자바스크립트 기반 라이브러리 로서, 자바스크립트가 쓰이는 곳이라면 다양하게 활용 가능.

### Virtual DOM
실제 DOM 구조와 비슷한 리액트의 객체 트리로, <br/>
브라우저의 DOM 에 직접 접근하는 것이 아닌 가상의 DOM 에 한 번 렌더링한 후 기존의 DOM과 비교를 하며 변화가 필요한 곳만 렌더링.<br/>
상태의 변함에 따라 선택적으로 유저인터페이스를 렌더링하기 때문에 최소한의 DOM 처리로 컴포넌트 업데이트 가능.

### 단방향 흐름
데이터가 한 방향으로 흐르도록 유지해주는 패턴. <br/>
데이터가 내려가기만 하고 밑에서 데이터를 올려줄 수 없기떄문에 부모의 데이터를 바꾸기 위해서는 state를 이용해야 한다. 

* Props and State
Props: 부모 컴포넌트에서 자식 컴포넌트로 전달해주는 데이터이다. <br/>
자식 컴포넌트에서 전달 받은 props는 변경 불가(Read Only 의 성격을 가짐.) <br/>
props를 전달해준 최상위 부모 컴포넌트만 props를 변경할 수 있다.<br/>
State: 사용자와의 상호작용을 통해 데이터를 동적으로 변경해야 하는 것과 같이 동적인 데이터를 다룰 때 사용한다. 

각각의 state는 독립적이라 다른 컴포넌트에 직접적인 접근은 불가능하다. 그러나 자신보다 상위에 있는 state는 변경이 가능하지만 state를 변경해주는 함수를 props로 받는다면 state의 변경이 가능하다.


## 💎 리액트 장/단점_react-pros-and-cons
### 👍🏼 장점
#### 1. SPA 로딩방식

기존 웹 페이지의 로딩방식 
- 화면전환이 일어날 때마다 HTML을 계속 서버에 요청해서 사용자의 상태유지가 힘듦
- 바뀌지 않아도 될 부분까지 새로 불러오기 때문에 불필요한 로딩이 있음
- 
SPA 로딩방식
- 단일페이지 이기 때문에 사용자의 상태 유지에 용이
- 바뀔부분만 새롭게 불러와 효율적

#### 2. 컴포넌트 기반
- 독립적이고 재사용이 가능하여 기능 자체에 집중하여 개발 가능
- 어떠한 기능에 오류가 났을때 해당 컴포넌트로 이동하여 에러를 찾을 수 있어 유지보수에 용이

#### 3. 단방향성
- 데이터 흐름을 단방향으로 제한함으로서 데이터를 추적과 오류 났을 시 디버깅을 쉽게 해준다.

#### 그 외
- CSR(client side rendering) & SSR (server side rendering) 둘 다 지원하여 브라우저 측 초기 렌더링의 딜레이를 줄인다.
- 앵귤러와 같이 이미 갖춰진 프레임워크가 아니기 때문에 다른 프레임워크와 혼용이 가능

### 👎🏼 리액트 단점
#### 1. view 에 만 관여
- Routing, Ajax 등의 기능을 제공하지 않기 때문에 Third party library(=패키지 모듈) 를 이용하거나 직접 구현해야 한다. 
- view 외 기능들은 직접 구현하거나 라이브러리를 사용하여 구현하기 때문에 JavaScript 배경지식이 부족할 경우에는 사용이 힘들다. 
#### 2. IE8 이하 버전들을 지원하지 않는다. 
- IE8 이하 버전을 지원해야 할 경우 v0.14 버전을 사용 해야함.


## 💎 리액트 동작원리_how-react-works
### 👇🏼 리액트는 오직 View 만 신경쓰는 라이브러리! 단방향성
보통 소프트웨어에서 쓰이는 MVC 패턴(모델(데이터관련) 뷰(html,css같은거) 컨트롤러(모델,뷰 합치고 제어해주는 파트가 컨트롤러))과 달리,  <br/>
단방향으로 흐르며, 데이터 변경에 관한 DOM 객체만 변경해주는 체계로 이루어짐.<br/>
이때, 실제 브라우저의 DOM을 제어하는 것이 아닌 가상의 DOM 현재의 DOM 과 비교하여 재조정을 거친다.<br/>
컴포넌트의 state 가 변경됐을때 setState() 메소드를 호출하여 가상의 DOM 을 변경한다. 
데이터가 변경되면 양방향 데이터 바인딩처럼 모델 변경 
=> 즉, 부모만 자식에게 데이터를 줄 수 있고 자식은 부모에게 데이터를 줄 수 없다.
### ☝🏼Lifting state up
<div align = 'center'>
<img src="https://user-images.githubusercontent.com/80618616/138307751-4d2cb44e-72fd-4ae0-84e8-907e968cbfe4.png" width="70%">
</div>
하지만, 자식이 부모의 상태를 변경해야 할 경우를 우리는 Lifting state up 이라는 것을 이용.
1. 상위 컴포넌트에서 state을 변경시키는 함수를 만들고 이 함수를 자식에게 props로 넘긴다.
자식은 이 함수를 받아 사용하면 부모의 상태가 변경됩니다.
=> 상위 컴포넌트에서 this를 꼭 bind해서 넘겨야 부모상태 변경 가능.
하지만 화살표 함수를 사용하면 실행 context를 만들지 않으므로 binding이 필요 없다

### 리액트 라이프사이클로 보는 동작원리
라이프 사이클은 해당 라이브러리가 동작하는 과정 그 자체를 의미.
(기본적으로 다양한 라이브러리 및 프레임워크들은 자기만의 라이프 사이클을 가지고 있다.)
리액트 컴포넌트 객체가 dom에 실제로 삽입되기 전까지 과정을 마운팅이라고 부르고 위의 과정을 라이프사이클을 통해 본다면 다음과 같다

1. constructor() -> 이용해서 컴포넌트 초기화를 해준다. 
2. componentWillMount() -> 불러와진다.
3. render() -> 실제로 렌더링을 통해 화면에 그려진 뒤에 componentDidMount 처리가 끝난 뒤에 불러지는 함수가 실행된다. => 이때 api가 호출. 
(컴포넌트가 모두 구성된 직후 인 componentDidMount() 함수에서 api 호출을 수행하면 효과적이다.)
4. 데이터 변경 기본적으로 화면에 특정한 객체를 렌더링하기 위해서는 props 혹은 state를 사용. 
props와 state는 이러한 과정이 서로 다르지만 대략적으로 같은 순서로 수행된다. 
5. shouldComponentUpdate() 컴포넌트 스테이트를 업데이트를 할지 처리를 하고 
6. componentWillUpdate() render() 다시화면이 구성된다. componentDidUpdate() 함수가 불러와짐.
7. react는 상태변화를 감지한다. 자동으로 감지해서 shouldComponentUpdate() 불러옴
8. 컴포넌트가 언마운트, 해제될때는 **componentWillUnmount** 를 이용하여 처리

## 🚨 componentWillUnmount 혹은 useEffect 에서 서버로부터 데이터를 받아올 시 주의할 점
### state 는 초기화 되어있지 않다
1. 컴포넌트 상태값의 시작은 항상 null 이다.
2. 비동기적으로 데이터를 처리 할 때 컴포넌트는 적어도 한 번 데이터가 불러지기 전에 렌더링 된다.
3. 즉, 라이프사이클이 실행되는 동안 이루어지는 비동기 호출은 컴포넌트가 데이터가 로드되기 전에 렌더링이 되어 <br/>
state 의 값을 적절히 설정해주지 undefined error 를 초래하게 된다.


